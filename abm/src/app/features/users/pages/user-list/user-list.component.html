<div class="max-w-4xl mx-auto p-2 space-y-0 pt-20">

  <!-- Header y buscador -->
  <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-2 mb-2">
    <button (click)="onCreate()"
      class="btn-create">
      Nuevo Usuario
    </button>

    <input type="text" [(ngModel)]="searchText" placeholder="Buscar usuario..."
      class="border border-gray-300 rounded px-3 py-2 w-full md:w-64 focus:outline-none focus:ring-2 focus:ring-blue-500" />
  </div>

  <!-- Tabla -->
  <div class="overflow-x-auto rounded shadow">
    <table class="min-w-full bg-white divide-y divide-gray-200">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-4 py-2 text-center  font-medium">#</th>
          <th class="px-4 py-2 text-center  font-medium">Nombre</th>
          <th class="px-4 py-2 text-center  font-medium">Email</th>
          <th class="px-4 py-2 text-center  font-medium">Rol</th>
          <th class="px-4 py-2 text-center  font-medium">Creado</th>
          <th class="px-4 py-2 text-center  font-medium">Acciones</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        <!-- Filas con datos -->
        <tr *ngFor="let usr of paginateUsers; let i = index" class="hover:bg-gray-50">
    <td class="px-4 py-3 text-center">{{ i + 1 + pageIndex * pageSize }}</td>
    <td class="px-4 py-3 text-center">{{ usr.name }}</td>
    <td class="px-4 py-3 text-center">{{ usr.email }}</td>
    <td class="px-4 py-3 text-center capitalize">{{ usr.role }}</td>
    <td class="px-4 py-3 text-center">{{ usr.createdAt | date:'short' }}</td>
    <td class="px-4 py-3 flex justify-center gap-2">
      <button (click)="onEdit(usr)" class="btn-edit">Editar</button>
      <button (click)="onDelete(usr.id)" class="btn-delet">Eliminar</button>
    </td>
  </tr>

        <!-- Filas vacías -->
      <tr *ngFor="let empty of getEmptyRows()" class="h-[60.5px]">
    <td class="px-4 py-3" colspan="6">&nbsp;</td>
  </tr>
      </tbody>
    </table>
  </div>

  <!-- Paginador Material -->
  <div class="user-list-paginator">
    <mat-paginator [length]="filteredUsers.length" [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 20]"
      (page)="onPageChange($event)">
    </mat-paginator>
  </div>
</div>

<!-- Modal -->
<div *ngIf="isModalOpen" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg shadow-lg w-full max-w-lg p-6 relative">
    <app-user-form [user]="selectedUser" (save)="onSave($event)" (cancel)="isModalOpen = false">
    </app-user-form>
    <button (click)="isModalOpen = false"
      class="absolute top-3 right-3 text-gray-500 hover:text-gray-700 text-lg font-bold">
      ✕
    </button>
  </div>
</div>
