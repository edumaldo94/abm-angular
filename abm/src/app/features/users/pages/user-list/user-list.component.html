<div class="max-w-6xl mx-auto p-4 space-y-6 pt-20">
  <!-- Header y buscador -->
  <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-2 mb-2">
    <button
      (click)="onCreate()"
      class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded shadow transition">
      Crear usuario
    </button>

    <input
      type="text"
      [(ngModel)]="searchText"
      placeholder="Buscar usuario..."
      class="border border-gray-300 rounded px-3 py-2 w-full md:w-64 focus:outline-none focus:ring-2 focus:ring-blue-500"
    />
  </div>

  <!-- Tabla -->
  <div class="overflow-x-auto rounded shadow">
    <table class="min-w-full bg-white divide-y divide-gray-200">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-4 py-2 text-left font-medium">#</th>
          <th class="px-4 py-2 text-left font-medium">Nombre</th>
          <th class="px-4 py-2 text-left font-medium">Email</th>
          <th class="px-4 py-2 text-left font-medium">Rol</th>
          <th class="px-4 py-2 text-left font-medium">Creado</th>
          <th class="px-4 py-2 text-left font-medium">Acciones</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        <tr
          *ngFor="let usr of filteredUsers  | paginate: { itemsPerPage: itemsPerPage, currentPage: page }; let i = index"
          class="hover:bg-gray-50"
        >
          <td class="px-4 py-2">{{ i + 1 + (page - 1) * itemsPerPage }}</td>
          <td class="px-4 py-2">{{ usr.name }}</td>
          <td class="px-4 py-2">{{ usr.email }}</td>
          <td class="px-4 py-2 capitalize">{{ usr.role }}</td>
          <td class="px-4 py-2">{{ usr.createdAt | date:'short' }}</td>
          <td class="px-4 py-2 flex gap-2">
            <button
              (click)="onEdit(usr)"
              class="bg-yellow-400 hover:bg-yellow-500 text-white px-2 py-1 rounded transition">
              Editar
            </button>
            <button
              (click)="onDelete(usr.id)"
              class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded transition">
              Eliminar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Paginación -->
  <div class="flex justify-end mt-4">
    <pagination-controls
      (pageChange)="page = $event"
      [maxSize]="5"
      [directionLinks]="true"
      [autoHide]="true"
      class="pagination flex gap-2 text-gray-700">
    </pagination-controls>
  </div>
</div>

<!-- Modal -->
<div *ngIf="isModalOpen" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg shadow-lg w-full max-w-lg p-6 relative">
    <app-user-form
      [user]="selectedUser"
      (save)="onSave($event)"
      (cancel)="isModalOpen = false">
    </app-user-form>
    <button
      (click)="isModalOpen = false"
      class="absolute top-3 right-3 text-gray-500 hover:text-gray-700 text-lg font-bold">
      ✕
    </button>
  </div>
</div>
